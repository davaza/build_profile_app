(this["webpackJsonpmy-app1"]=this["webpackJsonpmy-app1"]||[]).push([[0],{32:function(e,t,a){e.exports=a(45)},37:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),o=a.n(r),l=(a(37),a(5)),s=a(10),i=a(3);function u(){return c.a.createElement("div",null,c.a.createElement("h2",null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"))}var p,m,h,d=a(4);!function(e){e.LOGIN="ACTION_LOGIN",e.LOGOUT="ACTION_LOGOUT",e.PROFILE="ACTION_PROFILE",e.NEWS="ACTION_NEWS"}(p||(p={})),function(e){e.BEGIN="_BEGIN",e.SUCCESS="_SUCCESS",e.FAILURE="_FAILURE",e.INCORRECT_AUTH="_INCORRECT_AUTH"}(m||(m={})),function(e){e.URL_ROOT="https://mysterious-reef-29460.herokuapp.com/api/v1",e.URL_USER_INFO="user-info",e.URL_LOGIN="https://mysterious-reef-29460.herokuapp.com/api/v1/validate",e.URL_NEWS="news"}(h||(h={}));var E=function e(t){var a=this;Object(d.a)(this,e),this.dispatch=t,this.validation=function(e,t){a.dispatch({type:"".concat(p.LOGIN).concat(m.BEGIN)});var n={email:e.login,password:e.pass},c={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)};fetch(h.URL_LOGIN,c).then((function(e){if(200===e.status)return Promise.resolve(e);throw a.dispatch({type:"".concat(p.LOGIN).concat(m.FAILURE)}),e.statusText})).then((function(e){return e.json()})).then((function(e){"ok"===e.status&&void 0!==e.data.id?(a.dispatch({type:"".concat(p.LOGIN).concat(m.SUCCESS),payload:{name:"TEST",id:e.data.id}}),t()):"err"===e.status&&"wrong_email_or_password"===e.message?a.dispatch({type:"".concat(p.LOGIN).concat(m.INCORRECT_AUTH)}):a.dispatch({type:"".concat(p.LOGIN).concat(m.FAILURE)})}))},this.logout=function(e){a.dispatch({type:"".concat(p.LOGOUT)}),e()}},f=a(12),O=a(14),g=a(13);a(26);function b(e){var t=e.msg;return c.a.createElement("div",{className:"alert alert-danger"},t)}function v(){return c.a.createElement("div",{className:"spinner-border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))}var y=function(e){Object(O.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={login:"",pass:"",redirectToPreviousRoute:!1},e.onbtnClickHandler=function(t){t.preventDefault();var a=e.state,n=a.login,c=a.pass;e.props.actions.validation({login:n,pass:c},(function(){e.setState({redirectToPreviousRoute:!0})}))},e.handleChangeLogin=function(t){var a=t.currentTarget.value;e.setState({login:a})},e.handleChangePass=function(t){var a=t.currentTarget.value;e.setState({pass:a})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state,t=e.login,a=e.pass,n=e.redirectToPreviousRoute,r=this.props,o=r.location,l=r.message,s=r.loading,u=(o.state||{from:{pathname:"/profile"}}).from;return n?c.a.createElement(i.a,{to:u}):c.a.createElement("div",{className:"form-auth-wrap"},c.a.createElement("form",{className:"form-auth clearfix"},c.a.createElement("h2",null,"\u0412\u0445\u043e\u0434"),c.a.createElement("label",{htmlFor:"login",className:"clearfix"},"\u041b\u043e\u0433\u0438\u043d"),c.a.createElement("input",{type:"text",id:"login",onChange:this.handleChangeLogin,placeholder:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",value:t}),c.a.createElement("label",{htmlFor:"pass",className:"clearfix"},"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement("input",{type:"password",id:"pass",onChange:this.handleChangePass,placeholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",value:a}),c.a.createElement("button",{onClick:this.onbtnClickHandler},"\u0412\u043e\u0439\u0442\u0438")),s&&c.a.createElement(v,null),l&&c.a.createElement(b,{msg:l||""}))}}]),a}(c.a.Component);var N=Object(l.b)((function(e){return{message:e.session.message,loading:e.session.loading}}),(function(e){return{actions:new E(e)}}))(y),j=function(e){Object(O.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={redirectToPreviousRoute:!1},e.onbtnClickHandler=function(t){t.preventDefault(),e.props.actions.logout((function(){e.setState({redirectToPreviousRoute:!0})}))},e}return Object(f.a)(a,[{key:"render",value:function(){return this.state.redirectToPreviousRoute?c.a.createElement(i.a,{to:"/login"}):c.a.createElement("div",{className:"form-auth-wrap"},c.a.createElement("form",{className:"form-auth clearfix"},c.a.createElement("button",{onClick:this.onbtnClickHandler},"\u0412\u044b\u0439\u0442\u0438")))}}]),a}(c.a.Component);var I=Object(l.b)(null,(function(e){return{actions:new E(e)}}))(j),L=function(e){Object(O.a)(a,e);var t=Object(g.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.getProfile("1")}},{key:"render",value:function(){var e=this.props.profile,t=e.userInfo,a=e.message;return c.a.createElement("div",null,c.a.createElement("h2",null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),t&&c.a.createElement("div",{className:"wrap-info"},c.a.createElement("p",null,"\u0413\u043e\u0440\u043e\u0434: ",t.city),c.a.createElement("ul",{className:"list"},"\u0417\u043d\u0430\u043d\u0438\u0435 \u044f\u0437\u044b\u043a\u043e\u0432:",t.languages.map((function(e,t){return c.a.createElement("li",{key:t},"+",e)}))),c.a.createElement("ul",{className:"list"},"\u0421\u0441\u044b\u043b\u043a\u0438:",t.social.map((function(e,t){return c.a.createElement("li",{key:t},"+",c.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{width:"24",alt:e.label,src:"./social/".concat(e.label,".png")})))})))),"user_not_found"===a&&c.a.createElement(b,{msg:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),c.a.createElement("p",null,e.loading&&"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"))}}]),a}(c.a.Component),R=a(23),C=a.n(R),S=a(28),w=function(){var e=Object(S.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if(!(a=e.sent).ok){e.next=11;break}return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:throw new Error(a.statusText);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.warn("getData Error: ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();function k(e){return"ok"===e.status}var U=function e(t){var a=this;Object(d.a)(this,e),this.dispatch=t,this.getProfile=function(e){a.dispatch({type:"".concat(p.PROFILE).concat(m.BEGIN)}),w("".concat(h.URL_ROOT,"/").concat(h.URL_USER_INFO,"/").concat(e)).then((function(e){k(e)?a.dispatch({type:"".concat(p.PROFILE).concat(m.SUCCESS),payload:e.data}):a.dispatch({type:"".concat(p.PROFILE).concat(m.FAILURE),payload:{errorMsg:e.message}})})).catch((function(e){a.dispatch({type:"".concat(p.PROFILE).concat(m.FAILURE),payload:"\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"})}))}};var T=Object(l.b)((function(e){return{profile:e.profile}}),(function(e){return{actions:new U(e)}}))(L),A=function(e){Object(O.a)(a,e);var t=Object(g.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.getNews()}},{key:"render",value:function(){var e=this.props.news,t=e.newsData;return c.a.createElement("div",null,c.a.createElement("h2",null,"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),t&&c.a.createElement("div",{className:"wrap-info"},c.a.createElement("ul",{className:"list"},t.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("h3",null,e.title),c.a.createElement("p",null,e.text))}))),c.a.createElement("p",null,"\u0412\u0441\u0435\u0433\u043e \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439: ",t.length)),c.a.createElement("p",null,e.loading&&"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"))}}]),a}(c.a.Component),_=function e(t){var a=this;Object(d.a)(this,e),this.dispatch=t,this.getNews=function(){a.dispatch({type:"".concat(p.NEWS).concat(m.BEGIN)}),w("".concat(h.URL_ROOT,"/").concat(h.URL_NEWS)).then((function(e){k(e)?a.dispatch({type:"".concat(p.NEWS).concat(m.SUCCESS),payload:e.data}):a.dispatch({type:"".concat(p.NEWS).concat(m.FAILURE),payload:{errorMsg:e.message}})})).catch((function(e){a.dispatch({type:"".concat(p.NEWS).concat(m.FAILURE),payload:"\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"})}))}};var G=Object(l.b)((function(e){return{news:e.news}}),(function(e){return{actions:new _(e)}}))(A),F=(a(44),a(31));var P=Object(l.b)((function(e){return{checkAuth:e.session.checkAuth}}),null)((function(e){var t=e.component,a=e.checkAuth,c=(e.location,Object(F.a)(e,["component","checkAuth","location"]));return n.createElement(i.b,Object.assign({},c,{render:function(e){return a?n.createElement(t,e):n.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}));var x=Object(l.b)((function(e){return{checkAuth:e.session.checkAuth}}),null)((function(e){return c.a.createElement("div",null,e.checkAuth?c.a.createElement(s.b,{to:"/logout"},"\u0412\u044b\u0445\u043e\u0434"):c.a.createElement(s.b,{to:"/login"},"\u0412\u0445\u043e\u0434"))})),W=function(){return n.createElement(s.a,null,n.createElement("div",null,n.createElement("ul",null,n.createElement("li",null,n.createElement(s.b,{to:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),n.createElement("li",null,n.createElement("div",{className:"test"},n.createElement(x,null))),n.createElement("li",null,n.createElement(s.b,{to:"/news"},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),n.createElement("li",null,n.createElement(s.b,{to:"/profile"},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"))),n.createElement("hr",null),n.createElement(i.d,null,n.createElement(i.b,{exact:!0,path:"/"},n.createElement(u,null)),n.createElement(i.b,{path:"/news",component:G}),n.createElement(i.b,{path:"/login",component:N}),n.createElement(i.b,{path:"/logout",component:I}),n.createElement(P,{path:"/profile",component:T}))))},B=a(11),D=a(29),H=a(30),M=a(2),J={get state(){return{session:{checkAuth:!1,loading:!1,failure:!1,user:void 0,message:""}}}};var q={get state(){return{profile:{loading:!1,failure:!1,message:"",userInfo:{city:"",languages:[],social:[]}}}}};var z={get state(){return{news:{loading:!1,failure:!1,message:"",newsData:[]}}}};var K=Object(B.combineReducers)({session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J.state,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(p.LOGIN).concat(m.BEGIN):return Object(M.a)(Object(M.a)({},e),{},{loading:!0});case"".concat(p.LOGIN).concat(m.SUCCESS):return Object(M.a)(Object(M.a)({},e),{},{loading:!1,checkAuth:!0,user:{name:t.payload.name,id:t.payload.id},message:""});case"".concat(p.LOGIN).concat(m.INCORRECT_AUTH):return Object(M.a)(Object(M.a)({},e),{},{loading:!1,checkAuth:!1,message:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435 \u0432\u0435\u0440\u043d\u043e"});case"".concat(p.LOGIN).concat(m.FAILURE):return Object(M.a)(Object(M.a)({},e),{},{loading:!1,checkAuth:!1,failure:!0,message:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"});case"".concat(p.LOGOUT):return Object(M.a)(Object(M.a)({},e),{},{checkAuth:!1})}return e},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q.state,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(p.PROFILE).concat(m.BEGIN):return Object(M.a)(Object(M.a)({},e),{},{loading:!0});case"".concat(p.PROFILE).concat(m.SUCCESS):return Object(M.a)(Object(M.a)({},e),{},{loading:!1,userInfo:{city:t.payload.city,languages:t.payload.languages,social:t.payload.social}});case"".concat(p.PROFILE).concat(m.FAILURE):return Object(M.a)(Object(M.a)({},e),{},{loading:!1,failure:!0,message:t.payload.errorMsg})}return e},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.state,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"".concat(p.NEWS).concat(m.BEGIN):return Object(M.a)(Object(M.a)({},e),{},{loading:!0});case"".concat(p.NEWS).concat(m.SUCCESS):return Object(M.a)(Object(M.a)({},e),{},{loading:!1,newsData:t.payload});case"".concat(p.NEWS).concat(m.FAILURE):return Object(M.a)(Object(M.a)({},e),{},{loading:!1,failure:!0,message:t.payload.errorMsg})}return e}}),Q=Object(B.createStore)(K,Object(D.composeWithDevTools)(Object(B.applyMiddleware)(H.a)));o.a.render(c.a.createElement(l.a,{store:Q},c.a.createElement(W,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.1686bb71.chunk.js.map